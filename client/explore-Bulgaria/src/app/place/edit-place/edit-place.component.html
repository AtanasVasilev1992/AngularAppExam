<main class="auth-container">
    <div *ngIf="isLoading" class="loader-wrapper">
        <app-loader />
    </div>

    <div class="form-container" *ngIf="!isLoading">
        <h1>Edit Place</h1>
        <div class="form-wrapper">
            <form class="edit-form" #form="ngForm" (ngSubmit)="editPlace(form)">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input
                        type="text"
                        name="name"
                        id="name"
                        class="form-control"
                        placeholder="Enter place name"
                        [ngModel]="place?.name"
                        #inputName="ngModel"
                        required
                        minlength="5"
                    />
                    <div class="error-container" *ngIf="inputName.touched">
                        <p
                            class="error-message"
                            *ngIf="inputName?.errors?.['required']"
                        >
                            Name is required!
                        </p>
                        <p
                            class="error-message"
                            *ngIf="inputName?.errors?.['minlength']"
                        >
                            Name must be at least 5 characters!
                        </p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="image">Image URL</label>
                    <input
                        type="text"
                        name="image"
                        id="image"
                        class="form-control"
                        placeholder="Enter image URL"
                        [ngModel]="place?.image"
                        #inputImage="ngModel"
                        required
                        appUrlValidator
                    />
                    <div class="error-container" *ngIf="inputImage.touched">
                        <p
                            class="error-message"
                            *ngIf="inputImage?.errors?.['required']"
                        >
                            Image URL is required!
                        </p>
                        <p
                            class="error-message"
                            *ngIf="inputImage?.errors?.['invalidUrl']"
                        >
                            URL must start with http:// or https://
                        </p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="city">City</label>
                    <input
                        type="text"
                        name="city"
                        id="city"
                        class="form-control"
                        placeholder="Enter city name"
                        [ngModel]="place?.city"
                        #inputCity="ngModel"
                        required
                        minlength="3"
                    />
                    <div class="error-container" *ngIf="inputCity.touched">
                        <p
                            class="error-message"
                            *ngIf="inputCity?.errors?.['required']"
                        >
                            City is required!
                        </p>
                        <p
                            class="error-message"
                            *ngIf="inputCity?.errors?.['minlength']"
                        >
                            City must be at least 3 characters!
                        </p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea
                        name="description"
                        id="description"
                        class="form-control"
                        placeholder="Enter place description"
                        [ngModel]="place?.description"
                        #inputDescription="ngModel"
                        required
                        minlength="10"
                        rows="4"
                    ></textarea>
                    <div
                        class="error-container"
                        *ngIf="inputDescription.touched"
                    >
                        <p
                            class="error-message"
                            *ngIf="inputDescription?.errors?.['required']"
                        >
                            Description is required!
                        </p>
                        <p
                            class="error-message"
                            *ngIf="inputDescription?.errors?.['minlength']"
                        >
                            Description must be at least 10 characters!
                        </p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="workTime">Work Time</label>
                    <input
                        type="text"
                        name="workTime"
                        id="workTime"
                        class="form-control"
                        placeholder="Enter work hours"
                        [ngModel]="place?.workTime"
                        #inputWorkTime="ngModel"
                        required
                    />
                    <div class="error-container" *ngIf="inputWorkTime.touched">
                        <p
                            class="error-message"
                            *ngIf="inputWorkTime?.errors?.['required']"
                        >
                            Work time is required!
                        </p>
                    </div>
                </div>

                <div class="button-group">
                    <button
                        type="submit"
                        class="submit-btn"
                        [disabled]="form.invalid"
                    >
                        Save Changes
                    </button>
                    <button
                        type="button"
                        class="cancel-btn"
                        routerLink="/places"
                    >
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</main>
